{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixebay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\"\n\nexport async function getImages(image, currentPage) {\n    const BASE_URL = 'https://pixabay.com'\n    const END_POINT = '/api/'\n    const url = BASE_URL + END_POINT\n    \n    const params = {\n        key: '43041938-51a06b63921488a862c0fcc6d',\n        q: image,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        lang: 'en',\n        page: currentPage,\n        per_page: 15\n    }\n\n    const res = await axios.get(url, { params })\n    return res.data\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { hideLoadIcon } from \"../main\";\n\nexport let checkData = true\n// повний рендер галереї\nexport function renderImages(obj) { \n    if (obj.length === 0) {\n        hideLoadIcon()\n        iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: \"topRight\",\n        })\n        return catchData = false \n    }\nconst markup = obj.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n     `\n    <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    <div class=\"content-image\">\n    <p class=\"pege-item\">Likes<span class=\"inf-item\">${likes}</span></p>\n    <p class=\"pege-item\">Views<span class=\"inf-item\">${views}</span></p>\n    <p class=\"pege-item\">Comments<span class=\"inf-item\">${comments}</span></p>\n    <p class=\"pege-item\">Downloads<span class=\"inf-item\">${downloads}</span></p>\n    </div>\n    </li>\n    `).join('')\n    return markup\n    }\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./js/pixebay-api\";\nimport { renderImages } from \"./js/render-functions\";\nimport { checkData } from \"./js/render-functions\";\n\n\n\nexport let image\nlet page = 1\nlet maxPage = 0\nconst perSize = 15\n\n// обєкт з доступом до елементів розмітки\nexport const refs = {\n    formElem: document.querySelector('form'),\n    list: document.querySelector('.gallery-image'),\n    loadItem: document.querySelector('.loader-cont'),\n    btnLoad: document.querySelector('.btn-primary'),\n    loadIcon: document.querySelector('.content-loader'),\n    loadIconMore: document.querySelector('.loader')\n}\n\n\nrefs.formElem.addEventListener('submit', onFormSubmit)\n\n\nrefs.btnLoad.addEventListener('click', onLoadMoreClick)\n\n// івент по запиту на сервер\nasync function onFormSubmit(event){\n    event.preventDefault()\n    hideLoadMore()\n    page = 1\n    image = event.target.elements.search.value.trim()\n    refs.list.innerHTML = ''\n    if (!image && checkData) {\n        hideLoadIcon()\n        iziToast.info({\n            message: \"Line is empty, enter a value\",\n            position: \"topLeft\"\n        })\n        refs.list.innerHTML = ''\n        return\n    }\n    try {\n        showLoadIcon()\n         const data = await getImages(image, page) \n        maxPage = Math.ceil(data.totalHits / perSize) \n        refs.list.insertAdjacentHTML('beforeend', renderImages(data.hits))\n        lightbox.refresh()\n        checkBtnStatus()\n        hideLoadIcon()\n    } catch (err) {\n        console.log(err)\n    }\n    \n    event.target.reset()\n}\n\n\n// запит для загрузки більше данних з сервера\nasync function onLoadMoreClick() {\n    try {\n        page += 1\n        showLoadBtn()\n        const data = await getImages(image, page) \n\n        refs.list.insertAdjacentHTML('beforeend', renderImages(data.hits))\n        hiddenLoadBtn()\n        lightbox.refresh()\n    }catch (err) {\n        console.log(err)\n    }\n    myScroll()\n    checkBtnStatus()\n}\n\n// перевіка чи потрібно показувати кнопку\nfunction checkBtnStatus() {\n    if (page >= maxPage) {\n        hideLoadMore()\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: \"topRight\",\n        })\n    } else {\n        showLoadMore()\n    \n    }\n}\n\n// показує кнопку\nfunction showLoadMore() {\n    refs.btnLoad.classList.remove('hidden')\n}\n// приховує кнопку\nexport function hideLoadMore() {\n    refs.btnLoad.classList.add('hidden')\n}\n\n// функция показу іконки при загрузкі\nfunction showLoadIcon() {\n    refs.loadIcon.classList.remove('hidden')\n}\n\n// функция приховування іконки загрузки\nexport function hideLoadIcon() {\n    refs.loadIcon.classList.add('hidden')\n}\n\n// функция показу іконки загрузки в кнопкі\nfunction showLoadBtn(){\n    refs.loadIconMore.classList.remove('hidden')\n}\n\n// функция приховування іконки загрузки в кнопкі\nfunction hiddenLoadBtn(){\n    refs.loadIconMore.classList.add('hidden')\n}\n\n// скрол на висоту двох вкладень\nfunction myScroll(){\n    const item = document.querySelector('.gallery-item')\n    const height = item.getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: height*2,\n        behavior: 'smooth',\n      });\n}\n\n// слайт бар\nexport const lightbox = new SimpleLightbox('.gallery-link', { \n    captionsData: 'alt',\n    captionDelay: 250,\n    overlayOpacity: 0.8,\n })"],"names":["getImages","image","currentPage","url","params","axios","checkData","renderImages","obj","hideLoadIcon","iziToast","webformatURL","largeImageURL","tags","likes","views","comments","downloads","page","maxPage","perSize","refs","onFormSubmit","onLoadMoreClick","event","hideLoadMore","showLoadIcon","data","lightbox","checkBtnStatus","err","showLoadBtn","hiddenLoadBtn","myScroll","showLoadMore","height","SimpleLightbox"],"mappings":"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"}