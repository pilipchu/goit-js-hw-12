{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixebay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\"\n\nexport async function getImages(image, currentPage) {\n    const BASE_URL = 'https://pixabay.com'\n    const END_POINT = '/api/'\n    const url = BASE_URL + END_POINT\n    \n    const params = {\n        key: '43041938-51a06b63921488a862c0fcc6d',\n        q: image,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        lang: 'en',\n        page: currentPage,\n        per_page: 24\n    }\n\n    const res = await axios.get(url, { params })\n    return res.data\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { refs } from \"../main\";\nimport { lightbox } from \"../main\";\n// повний рендер галереї\nexport function renderImages(obj) { \n    if (obj.length === 0) {\n        iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: \"topRight\",\n        })\n        refs.list.innerHTML = ''\n        return\n    }\nconst markup = obj.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n     `\n    <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    <div class=\"content-image\">\n    <p class=\"pege-item\">Likes<span class=\"inf-item\">${likes}</span></p>\n    <p class=\"pege-item\">Views<span class=\"inf-item\">${views}</span></p>\n    <p class=\"pege-item\">Comments<span class=\"inf-item\">${comments}</span></p>\n    <p class=\"pege-item\">Downloads<span class=\"inf-item\">${downloads}</span></p>\n    </div>\n    </li>\n    `).join('')\n    lightbox.refresh();\n    return markup\n    }\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./js/pixebay-api\";\nimport { renderImages } from \"./js/render-functions\";\n\n\nexport let image\nlet page = 1\nlet maxPage = 0\nconst perSize = 24\n\nexport const refs = {\n    formElem: document.querySelector('form'),\n    list: document.querySelector('.gallery-image'),\n    loadItem: document.querySelector('.loader-cont'),\n    btnLoad: document.querySelector('.btn-primary')\n}\n\n\nrefs.formElem.addEventListener('submit', onFormSubmit)\n\n\nrefs.btnLoad.addEventListener('click', onLoadMoreClick)\n\nasync function onFormSubmit(event){\n    event.preventDefault()\n    hideLoadMore()\n    page = 1\n    image = event.target.elements.search.value.trim()\n    refs.list.innerHTML = ''\n    if (!image) {\n        iziToast.info({\n            message: \"Line is empty, enter a value\",\n            position: \"topLeft\"\n        })\n        return\n    }\n    try {\n         const data = await getImages(image, page) \n   maxPage = Math.ceil(data.totalHits / perSize) \n    refs.list.insertAdjacentHTML('beforeend', renderImages(data.hits))\n    } catch (err) {\n        console.log(err)\n    }\n    checkBtnStatus()\n        \n    event.target.reset()\n}\n\n\n// запит для загрузки більше данних з сервера\nasync function onLoadMoreClick() {\n    try {\n        page += 1\n        const data = await getImages(image, page) \n\n    refs.list.insertAdjacentHTML('beforeend', renderImages(data.hits))\n    }catch (err) {\n        console.log(err)\n    }\n    checkBtnStatus()\n}\n\nfunction checkBtnStatus() {\n    if (page >= maxPage) {\n        hideLoadMore()\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: \"topRight\",\n        })\n    } else {\n        showLoadMore()\n    }\n}\n\n// показує кнопку\nfunction showLoadMore() {\n    refs.btnLoad.classList.remove('hidden')\n}\n// приховує кнопку\nexport function hideLoadMore() {\n    refs.btnLoad.classList.add('hidden')\n}\n\n\nexport const lightbox = new SimpleLightbox('.gallery-link', { \n    captionsData: 'alt',\n  captionDelay: 250,\n    overlayOpacity: 0.8,\n })"],"names":["getImages","image","currentPage","url","params","axios","renderImages","obj","iziToast","refs","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","page","maxPage","perSize","onFormSubmit","onLoadMoreClick","event","hideLoadMore","data","err","checkBtnStatus","showLoadMore","SimpleLightbox"],"mappings":"owBAEO,eAAeA,EAAUC,EAAOC,EAAa,CAGhD,MAAMC,EAFW,sBACC,QAGZC,EAAS,CACX,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAM,KACN,KAAMC,EACN,SAAU,EACb,EAGD,OADY,MAAMG,EAAM,IAAIF,EAAK,CAAE,OAAAC,EAAQ,GAChC,IACf,CCfO,SAASE,EAAaC,EAAK,CAC9B,GAAIA,EAAI,SAAW,EAAG,CAClBC,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UACtB,CAAS,EACDC,EAAK,KAAK,UAAY,GACtB,MACH,CACL,MAAMC,EAASH,EAAI,IAAI,CAAC,CAAE,aAAAI,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAC3F;AAAA;AAAA,oCAE+BL,CAAa;AAAA,sCACXD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,uDAGTC,CAAK;AAAA,uDACLC,CAAK;AAAA,0DACFC,CAAQ;AAAA,2DACPC,CAAS;AAAA;AAAA;AAAA,KAG/D,EAAE,KAAK,EAAE,EACV,OAAAC,EAAS,QAAO,EACTR,CACX,CCrBO,IAAIT,EACPkB,EAAO,EACPC,EAAU,EACd,MAAMC,EAAU,GAEHZ,EAAO,CAChB,SAAU,SAAS,cAAc,MAAM,EACvC,KAAM,SAAS,cAAc,gBAAgB,EAC7C,SAAU,SAAS,cAAc,cAAc,EAC/C,QAAS,SAAS,cAAc,cAAc,CAClD,EAGAA,EAAK,SAAS,iBAAiB,SAAUa,CAAY,EAGrDb,EAAK,QAAQ,iBAAiB,QAASc,CAAe,EAEtD,eAAeD,EAAaE,EAAM,CAM9B,GALAA,EAAM,eAAgB,EACtBC,EAAc,EACdN,EAAO,EACPlB,EAAQuB,EAAM,OAAO,SAAS,OAAO,MAAM,KAAM,EACjDf,EAAK,KAAK,UAAY,GAClB,CAACR,EAAO,CACRO,EAAS,KAAK,CACV,QAAS,+BACT,SAAU,SACtB,CAAS,EACD,MACH,CACD,GAAI,CACC,MAAMkB,EAAO,MAAM1B,EAAUC,EAAOkB,CAAI,EAC9CC,EAAU,KAAK,KAAKM,EAAK,UAAYL,CAAO,EAC3CZ,EAAK,KAAK,mBAAmB,YAAaH,EAAaoB,EAAK,IAAI,CAAC,CAChE,OAAQC,EAAK,CACV,QAAQ,IAAIA,CAAG,CAClB,CACDC,EAAgB,EAEhBJ,EAAM,OAAO,MAAO,CACxB,CAIA,eAAeD,GAAkB,CAC7B,GAAI,CACAJ,GAAQ,EACR,MAAMO,EAAO,MAAM1B,EAAUC,EAAOkB,CAAI,EAE5CV,EAAK,KAAK,mBAAmB,YAAaH,EAAaoB,EAAK,IAAI,CAAC,CAChE,OAAOC,EAAK,CACT,QAAQ,IAAIA,CAAG,CAClB,CACDC,EAAgB,CACpB,CAEA,SAASA,GAAiB,CAClBT,GAAQC,GACRK,EAAc,EACdjB,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,UACtB,CAAS,GAEDqB,EAAc,CAEtB,CAGA,SAASA,GAAe,CACpBpB,EAAK,QAAQ,UAAU,OAAO,QAAQ,CAC1C,CAEO,SAASgB,GAAe,CAC3BhB,EAAK,QAAQ,UAAU,IAAI,QAAQ,CACvC,CAGO,MAAMS,EAAW,IAAIY,EAAe,gBAAiB,CACxD,aAAc,MAChB,aAAc,IACZ,eAAgB,EAClB,CAAA"}