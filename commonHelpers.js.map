{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixebay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\"\n\nexport async function getImages(image, currentPage) {\n    const BASE_URL = 'https://pixabay.com'\n    const END_POINT = '/api/'\n    const url = BASE_URL + END_POINT\n    \n    const params = {\n        key: '43041938-51a06b63921488a862c0fcc6d',\n        q: image,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        lang: 'en',\n        page: currentPage,\n        per_page: 24\n    }\n\n    const res = await axios.get(url, { params })\n    return res.data\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { hideLoadMore } from \"../main\";\nimport { refs } from \"../main\";\n\n// повний рендер галереї\nexport function renderImages(obj) { \n    if (obj.length === 0) {\n        refs.list.innerHTML = ''\n        iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: \"topRight\",\n        })\n    }else{\nconst markup = obj.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n     `\n    <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    <div class=\"content-image\">\n    <p class=\"pege-item\">Likes<span class=\"inf-item\">${likes}</span></p>\n    <p class=\"pege-item\">Views<span class=\"inf-item\">${views}</span></p>\n    <p class=\"pege-item\">Comments<span class=\"inf-item\">${comments}</span></p>\n    <p class=\"pege-item\">Downloads<span class=\"inf-item\">${downloads}</span></p>\n    </div>\n    </li>\n    `).join('')\n        \n    return markup\n    }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./js/pixebay-api\";\nimport { renderImages } from \"./js/render-functions\";\n\n\nexport let image\nlet page = 1\nlet maxPage = 0\nconst perSize = 24\n\nexport const refs = {\n    formElem: document.querySelector('form'),\n    list: document.querySelector('.gallery-image'),\n    loadItem: document.querySelector('.loader-cont'),\n    btnLoad: document.querySelector('.btn-primary')\n}\n\n\nrefs.formElem.addEventListener('submit', onFormSubmit)\n\n\nrefs.btnLoad.addEventListener('click', onLoadMoreClick)\n\nasync function onFormSubmit(event){\n    event.preventDefault()\n    hideLoadMore()\n    page = 1\n    image = event.target.elements.search.value.trim()\n    if (image) {\n    refs.list.innerHTML = ''\n        const data = await getImages(image, page) \n   maxPage = Math.ceil(data.total / perSize) \n    refs.list.insertAdjacentHTML('beforeend', renderImages(data.hits))\n    checkBtnStatus()\n    } else {\n        refs.list.innerHTML = '' \n        iziToast.info({\n        message: \"Line is empty, enter a value\",\n        position: \"topLeft\"\n    })\n}\n    event.target.reset()\n}\n\n\n// запит для загрузки більше данних з сервера\nasync function onLoadMoreClick() {\n page +=1\n    const data = await getImages(image, page) \n\n    refs.list.insertAdjacentHTML('beforeend', renderImages(data.hits))\n    checkBtnStatus()\n}\n\nfunction checkBtnStatus() {\n    if (page >= maxPage) {\n        hideLoadMore()\n    } else {\n        showLoadMore()\n    }\n}\n\n// показує кнопку\nfunction showLoadMore() {\n    refs.btnLoad.classList.remove('hidden')\n}\n// приховує кнопку\nexport function hideLoadMore() {\n    refs.btnLoad.classList.add('hidden')\n}"],"names":["getImages","image","currentPage","url","params","axios","renderImages","obj","refs","iziToast","webformatURL","largeImageURL","tags","likes","views","comments","downloads","page","maxPage","perSize","onFormSubmit","onLoadMoreClick","event","hideLoadMore","data","checkBtnStatus","showLoadMore"],"mappings":"6vBAEO,eAAeA,EAAUC,EAAOC,EAAa,CAGhD,MAAMC,EAFW,sBACC,QAGZC,EAAS,CACX,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAM,KACN,KAAMC,EACN,SAAU,EACb,EAGD,OADY,MAAMG,EAAM,IAAIF,EAAK,CAAE,OAAAC,EAAQ,GAChC,IACf,CCdO,SAASE,EAAaC,EAAK,CAC9B,GAAIA,EAAI,SAAW,EACfC,EAAK,KAAK,UAAY,GACtBC,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UACtB,CAAS,MAiBL,QAfWF,EAAI,IAAI,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAC3F;AAAA;AAAA,oCAE+BL,CAAa;AAAA,sCACXD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,uDAGTC,CAAK;AAAA,uDACLC,CAAK;AAAA,0DACFC,CAAQ;AAAA,2DACPC,CAAS;AAAA;AAAA;AAAA,KAG/D,EAAE,KAAK,EAAE,CAId,CCtBO,IAAIf,EACPgB,EAAO,EACPC,EAAU,EACd,MAAMC,EAAU,GAEHX,EAAO,CAChB,SAAU,SAAS,cAAc,MAAM,EACvC,KAAM,SAAS,cAAc,gBAAgB,EAC7C,SAAU,SAAS,cAAc,cAAc,EAC/C,QAAS,SAAS,cAAc,cAAc,CAClD,EAGAA,EAAK,SAAS,iBAAiB,SAAUY,CAAY,EAGrDZ,EAAK,QAAQ,iBAAiB,QAASa,CAAe,EAEtD,eAAeD,EAAaE,EAAM,CAK9B,GAJAA,EAAM,eAAgB,EACtBC,EAAc,EACdN,EAAO,EACPhB,EAAQqB,EAAM,OAAO,SAAS,OAAO,MAAM,KAAM,EAC7CrB,EAAO,CACXO,EAAK,KAAK,UAAY,GAClB,MAAMgB,EAAO,MAAMxB,EAAUC,EAAOgB,CAAI,EAC7CC,EAAU,KAAK,KAAKM,EAAK,MAAQL,CAAO,EACvCX,EAAK,KAAK,mBAAmB,YAAaF,EAAakB,EAAK,IAAI,CAAC,EACjEC,EAAgB,CACpB,MACQjB,EAAK,KAAK,UAAY,GACtBC,EAAS,KAAK,CACd,QAAS,+BACT,SAAU,SAClB,CAAK,EAEDa,EAAM,OAAO,MAAO,CACxB,CAIA,eAAeD,GAAkB,CAChCJ,GAAO,EACJ,MAAMO,EAAO,MAAMxB,EAAUC,EAAOgB,CAAI,EAExCT,EAAK,KAAK,mBAAmB,YAAaF,EAAakB,EAAK,IAAI,CAAC,EACjEC,EAAgB,CACpB,CAEA,SAASA,GAAiB,CAClBR,GAAQC,EACRK,EAAc,EAEdG,EAAc,CAEtB,CAGA,SAASA,GAAe,CACpBlB,EAAK,QAAQ,UAAU,OAAO,QAAQ,CAC1C,CAEO,SAASe,GAAe,CAC3Bf,EAAK,QAAQ,UAAU,IAAI,QAAQ,CACvC"}